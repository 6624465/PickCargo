@model PickC.Internal2.ViewModals.OperatorVm
@{
    ViewBag.Title = "OperatorDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";

    //var OperatorVehicle = new List<Master.Contract.OperatorVehicle>();
    //Model.OPerator.OperatorVehicle = OperatorVehicle;

    //var driver = new Master.Contract.OperatorVehicle();
    //driver.Model = "Model";
    //driver.OperatorVehicleID = "OperatorVehicleID";
    //driver.Tonnage = "Tonnage";
    //driver.VehicleRegistrationNo = "VehicleRegistrationNo";
    //driver.VehicleType = "VehicleType";

    //Model.OPerator.OperatorVehicle = new List<Master.Contract.OperatorVehicle>();
    //Model.OPerator.OperatorVehicle.Add(driver);
}
        @section seccss{
            <link href="@Url.Content("~/Css/bootstrap-datetimepicker.css")" rel="stylesheet" />
        }

        @using (Html.BeginForm("SaveOperator", "Operator", FormMethod.Post, new { id = "frmOperatorAdd", name = "frmOperatorAdd", enctype = "multipart/form-data" }))
        {
            <section class="content">
                @*<div class="row">
                        <div class="col-md-12">
                            @{ Html.RenderPartial("DashboardMenuList"); }
                        </div>
                    </div>*@
                <div class="row">
                    <div class="col-md-12">
                        <div class="tab-main-content">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="box">
                                        <div class="box-header">
                                            <h3 class="box-title">Operator</h3>
                                        </div>
                                        <div class="box-body">
                                            <h5>Operator Info</h5>
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Operator ID</label>
                                                        @Html.TextBoxFor(x => x.OPerator.OperatorID, new { @class = "form-control", placeholder = "Operator ID", @readonly = "readonly" })
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Operator Name</label>
                                                        @Html.TextBoxFor(x => x.OPerator.OperatorName, new { @class = "form-control", placeholder = "Operator Name" })
                                                    </div>
                                                </div>
                                                @*<div class="col-md-4">
                                                        <div class="form-group">
                                                            <label>Vehicle No</label>
                                                            @Html.TextBoxFor(x => x.OPerator.VehicleNo, new { @class = "form-control", placeholder = "Vehicle No" })
                                                        </div>
                                                    </div>*@
                                            </div>
                                            <hr />
                                            <h5>Personal Info</h5>
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Father Name</label>
                                                        @Html.TextBoxFor(x => x.OPerator.FatherName, new { @class = "form-control", placeholder = "Father Name" })
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Date Of Birth</label>
                                                        <div class="input-group dtCss">
                                                            @Html.TextBoxFor(x => x.OPerator.DateOfBirth,
                                                       new
                                                       {
                                                           @class = "form-control",
                                                           placeholder = "Date Of Birth"
                                                       })
                                                            <span class="input-group-btn">
                                                                <button type="button" class="btn btn-default"><i class="fa fa-calendar" aria-hidden="true"></i></button>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Place Of Birth</label>
                                                        @Html.TextBoxFor(x => x.OPerator.PlaceOfBirth,
   new
   {
       @class = "form-control",
       placeholder = "Place Of Birth"
   })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Gender</label>
                                                        @Html.DropDownListFor(x => x.OPerator.Gender,
new SelectList(Model.operatorLookupDTO.genderOptions, "LookupID", "LookupDescription"),
"Select Gender",
new { @class = "form-control" })
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Maritial Status</label>
                                                        @Html.DropDownListFor(x => x.OPerator.MaritialStatus,
new SelectList(Model.operatorLookupDTO.maritalOptions, "LookupID", "LookupDescription"),
"Select Maritial Status",
new { @class = "form-control" })
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Mobile No</label>
                                                        @Html.TextBoxFor(x => x.OPerator.MobileNo, new { @class = "form-control", placeholder = "Mobile No" })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Phone No</label>
                                                        @Html.TextBoxFor(x => x.OPerator.PhoneNo, new { @class = "form-control", placeholder = "Phone No" })
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <label>Nationality</label>
                                                    <div class="form-group">
                                                        <select id="ddlNationality" class="form-control">
                                                            <option value="Indian" ;Text="Indian">Indian</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr />
                                            <h5>Identification Info</h5>
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>PAN No</label>
                                                        @Html.TextBoxFor(x => x.OPerator.PANNo, new { @class = "form-control", placeholder = "PAN No" })
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Aadhar Card No</label>
                                                        @Html.TextBoxFor(x => x.OPerator.AadharCardNo, new { @class = "form-control", placeholder = "Aadhar Card No" })
                                                    </div>
                                                </div>
                                                @*<div class="col-md-4">
                                                        <div class="form-group">
                                                            <label>License No</label>
                                                            @Html.TextBoxFor(x => x.OPerator.LicenseNo, new { @class = "form-control", placeholder = "License No" })
                                                        </div>
                                                    </div>*@
                                            </div>
                                            <hr />
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h5>Address Info</h5>
                                                    <div class="box">
                                                        <div class="box-header">
                                                            <h3 class="box-title">Address Info</h3>
                                                            <div class="box-tools">
                                                                <button class="btn btn-box-tool" type="button" onclick="AddAddress('-1')"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                            </div>
                                                        </div>
                                                        <div class="box-body">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <table class="table table-hover table-bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Address 1</th>
                                                                                <th>Address 2</th>
                                                                                <th>#Action</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="trBody">
                                                                            @if (Model.OPerator.AddressList != null)
                                                                            {
                                                                                for (var i = 0; i < Model.OPerator.AddressList.Count; i++)
                                                                                {
                                                                                    <tr id="trRow_@i" class="trRowCss">
                                                                                        <td>
                                                                                            <span id="Address1_span_@i">@Model.OPerator.AddressList[i].Address1</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.AddressList[i].Address1)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="Address2_span_@i">
                                                                                                @Model.OPerator.AddressList[i].Address2
                                                                                            </span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.AddressList[i].Address2)
                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.HiddenFor(x => Model.OPerator.AddressList[i].Address3)
                                                                                            @Html.HiddenFor(x => Model.OPerator.AddressList[i].Address4)
                                                                                            @Html.HiddenFor(x => Model.OPerator.AddressList[i].CityName)
                                                                                            @Html.HiddenFor(x => Model.OPerator.AddressList[i].StateName)
                                                                                            @Html.HiddenFor(x => Model.OPerator.AddressList[i].ZipCode)
                                                                                            @Html.HiddenFor(x => Model.OPerator.AddressList[i].IsActive)
                                                                                            <a class="hand" onclick="EditAddress('@i')">Edit</a>&nbsp;|&nbsp;
                                                                                            <a class="hand" onclick="DeleteAddress('@i')">Delete</a>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            }
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @*<div class="col-md-6">
                                                        <h5>Attachments</h5>
                                                        <div class="box">
                                                            <div class="box-header">
                                                                <h3 class="box-title">Attachments</h3>
                                                                <div class="box-tools">
                                                                    <button class="btn btn-box-tool" type="button" onclick="AddAttachments()"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                                </div>
                                                            </div>
                                                            <div class="box-body">

                                                            </div>
                                                        </div>
                                                    </div>*@
                                                <div class="col-md-6">
                                                    <h5>Bank Details</h5>
                                                    <div class="box">
                                                        <div class="box-header">
                                                            <h3 class="box-title">Bank Details</h3>
                                                            <div class="box-tools">
                                                                <button class="btn btn-box-tool" type="button" onclick="bankDetails('-1')"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                            </div>
                                                        </div>
                                                        <div class="box-body">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <table class="table table-hover table-bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Bank Name</th>
                                                                                <th>Branch</th>
                                                                                <th>Account Number</th>
                                                                                <th>Account Type</th>
                                                                                <th>#Action</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="trBodyBank">
                                                                            @if (Model.OPerator.BankDetails != null)
                                                                            {
                                                                                for (var i = 0; i < Model.OPerator.BankDetails.Count; i++)
                                                                                {
                                                                                    <tr id="trRow_@i" class="trRowCss">
                                                                                        <td>
                                                                                            <span id="txtBankName_span_@i">@Model.OPerator.BankDetails[i].BankName</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.BankDetails[i].BankName)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="txtBranch_span_@i">@Model.OPerator.BankDetails[i].Branch</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.BankDetails[i].Branch)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="txtAccNumber_span_@i">@Model.OPerator.BankDetails[i].AccountNumber</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.BankDetails[i].AccountNumber)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="txtAccType_span_@i">@Model.OPerator.BankDetails[i].AccountType</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.BankDetails[i].AccountType)
                                                                                        </td>
                                                                                        <td>
                                                                                            <a class="hand" onclick="EditBankDetails('@i')">Edit</a>&nbsp;|&nbsp;
                                                                                            <a class="hand" onclick="DeleteBankDetails('@i')">Delete</a>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            }
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <hr />
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h5>Vehicle Details</h5>
                                                    <div class="box">
                                                        <div class="box-header">
                                                            <h3 class="box-title">Vehicle Details</h3>
                                                            <div class="box-tools">
                                                                <button class="btn btn-box-tool" type="button" onclick="AddVehicle('-1')"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                            </div>
                                                        </div>
                                                        <div class="box-body">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <table class="table table-hover table-bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Vehicle Registration No</th>
                                                                                <th>Vehicle Type</th>
                                                                                <th>Vehicle Category</th>
                                                                                <th>Mode</th>                                                                                
                                                                                <th>Tonnage</th>
                                                                                <th>#Action</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="trBodyVehicle">
                                                                            @if (Model.OPerator.OperatorVehicle != null)
                                                                            {
                                                                                for (var i = 0; i < Model.OPerator.OperatorVehicle.Count; i++)
                                                                                {
                                                                                    <tr id="trRow_@i" class="trRowCss">
                                                                                        <td>
                                                                                            <span id="operatorVehicle_VehicleRegistrationNo_span_@i">@Model.OPerator.OperatorVehicle[i].VehicleRegistrationNo</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorVehicle[i].VehicleRegistrationNo, new { @class = "vehicleNoCss" })
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="operatorVehicle_VehicleType_span_@i">@Model.OPerator.OperatorVehicle[i].VehicleType</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorVehicle[i].VehicleType)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="operatorVehicle_VehicleCategory_span_@i">@Model.OPerator.OperatorVehicle[i].VehicleCategory</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorVehicle[i].VehicleCategory)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="operatorVehicle_Model_span_@i">@Model.OPerator.OperatorVehicle[i].Model</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorVehicle[i].Model)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="operatorVehicle_Tonnage_span_@i">@Model.OPerator.OperatorVehicle[i].Tonnage</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorVehicle[i].Tonnage)
                                                                                        </td>
                                                                                        <td>
                                                                                            <a class="hand" onclick="EditOperatorVehicle('@i')">Edit</a>&nbsp;|&nbsp;
                                                                                            <a class="hand" onclick="DeleteOperatorVehicle('@i')">Delete</a>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            }
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @*}*@
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <h5>Driver Details</h5>
                                                    <div class="box">
                                                        <div class="box-header">
                                                            <h3 class="box-title">Driver Details</h3>
                                                            <div class="box-tools">
                                                                @*<button class="btn btn-box-tool" type="button" onclick="bankDetails()">Add</button>*@
                                                                @*<button type="button" class="btn btn-box-tool" data-toggle="modal" data-target="#myModal"><i class="fa fa-plus" aria-hidden="true"></i></button>*@
                                                                <button class="btn btn-box-tool" type="button" onclick="AddDriver('-1')"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                            </div>
                                                        </div>
                                                        <div class="box-body">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <table class="table table-hover table-bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Driver Name</th>
                                                                                <th>Driver License No</th>
                                                                                <th>Driver Mobile No</th>
                                                                                <th>Driver Vehicle No</th>
                                                                                <th>#Action</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="trBodyDriver">
                                                                            @if (Model.OPerator.OperatorDriverList != null)
                                                                            {
                                                                                for (var i = 0; i < Model.OPerator.OperatorDriverList.Count; i++)
                                                                                {
                                                                                    <tr id="trRow_@i" class="trRowCss">
                                                                                        <td>
                                                                                            <span id="operatorDriverList_DriverName_span_@i">@Model.OPerator.OperatorDriverList[i].DriverName</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorDriverList[i].DriverName)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="operatorDriverList_DriverLicenseNo_span_@i">@Model.OPerator.OperatorDriverList[i].DriverLicenseNo</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorDriverList[i].DriverLicenseNo)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="operatorDriverList_DriverMobileNo_span_@i">@Model.OPerator.OperatorDriverList[i].DriverMobileNo</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorDriverList[i].DriverMobileNo)
                                                                                        </td>
                                                                                        <td>
                                                                                            <span id="operatorDriverList_VehicleNo_span_@i">@Model.OPerator.OperatorDriverList[i].VehicleattachedNo</span>
                                                                                            @Html.HiddenFor(x => Model.OPerator.OperatorDriverList[i].VehicleattachedNo)
                                                                                        </td>
                                                                                        <td>
                                                                                            <a class="hand" onclick="EditOperatorDriver('@i')">Edit</a>&nbsp;|&nbsp;
                                                                                            <a class="hand" onclick="DeleteOperatorDriver('@i')">Delete</a>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            }
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h5>Attachments</h5>
                                                    <div class="box">
                                                        <div class="box-header">
                                                            <h3 class="box-title">Attachments</h3>
                                                        </div>
                                                        <div class="box-body">
                                                            <div class="row">
                                                                <div class="col-md-2">
                                                                    <label>AADHAR CARD</label>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <input type="file" id="fadhar" name="fadhar" value="1375" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-2">
                                                                    <label>PAN CARD</label>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <input type="file" id="fpan" name="fpan" value="1374" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-2">
                                                                    <label>LICENSE CARD</label>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <input type="file" id="flicense" name="flicense" value="1376" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-2">
                                                                    <label>VOTER ID</label>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <input type="file" id="fvoter" name="fvoter" value="1377" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-2">
                                                                    <label>OTHERS</label>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <input type="file" id="fothers" name="fothers" value="1382" multiple="multiple" />
                                                                    @*@Html.TextBoxFor(model => model.files, "", new { @type = "file", @multiple = "multiple" })*@
                                                                </div>
                                                            </div>
                                                            <hr />

                                                            <div class="row" style="margin-bottom:15px;">
                                                                <div class="col-md-6">
                                                                    <button type="button" class="btn btn-primary btn-them " onclick="btnSave();">Save</button>

                                                                    <button type="button" class="btn btn-default " onclick="location.href = '@Url.Content("~/Operator/Operator")'">Cancel</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        }
        <div id="DriverModal" class="modal">
            <div class="modal-dialog modal-md">
                <form id="frmDriver" name="frmDriver">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Driver Info</h4>
                        </div>
                        <div class="modal-body" id="driverModalBody">
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Driver Name</label>
                                    @Html.DropDownList("operatorDriverList_DriverName", new SelectList(ViewBag.Driver, "Value", "Text"), "Select Category", new { @class = "form-control input-sm", onchange = "driverChanged(this)" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Driving License No</label>
                                    <input class="form-control" id="operatorDriverList_DriverLicenseNo" name="operatorDriverList_DriverLicenseNo" type="text" value="" readonly="readonly">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Driver Mobile No</label>
                                    <input class="form-control" id="operatorDriverList_DriverMobileNo" name="operatorDriverList_DriverMobileNo" type="text" value="" readonly="readonly">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Vehicle Attached No</label>
                                    @Html.DropDownList("operatorDriverList_VehicleNo", new SelectList(ViewBag.VehicleNo, "Value", "Text"), "Select Category", new { @class = "form-control input-sm" })
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                                <button type="button" onclick="btnSavedriver();" class="btn btn-primary">Save changes</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div id="VehicleModal" class="modal">
            <div class="modal-dialog modal-md">
                <form id="frmVehicle" name="frmVehicle">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Vehicle Info</h4>
                        </div>
                        <div class="modal-body" id="vehicleModalBody">
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Vehicle Registration No</label>
                                    <input class="form-control" id="operatorVehicle_VehicleRegistrationNo" name="operatorVehicle_VehicleRegistrationNo" type="text" value="" onchange="VehicleNo(this)" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Vehicle Type</label>
                                    @Html.DropDownList("operatorVehicle_VehicleType", new SelectList(ViewBag.VehicleType, "Value", "Text"), "Select Category", new { @class = "form-control input-sm" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Vehicle Category</label>
                                    @Html.DropDownList("operatorVehicle_VehicleCategory", new SelectList(ViewBag.VehicleCategory, "Value", "Text"), "Select Category", new { @class = "form-control input-sm", onchange = "onChangeVehicleCategory(this)" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Model</label>
                                    @Html.DropDownList("operatorVehicle_Model", new SelectList("Value", "Text"), "Select Category", new { @class = "form-control input-sm", onchange = "ModelChanged(this)", @disabled = "disabled" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Tonnage</label>
                                    <input class="form-control" id="operatorVehicle_Tonnage" name="operatorVehicle_Tonnage" type="text" value="" readonly="readonly" />
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                                <button type="button" onclick="btnSaveVehicle();" class="btn btn-primary">Save changes</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal" id="addressModal">
            <div class="modal-dialog modal-md">
                <form id="frmAddress" name="frmAddress">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Address Info</h4>
                        </div>
                        <div class="modal-body" id="addressModalBody">
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Address 1</label>
                                    <input class="form-control" id="Address1" name="Address1" type="text" value="">
                                </div>
                                <div class="col-md-6">
                                    <label>Address 2</label>
                                    <input class="form-control" id="Address2" name="Address2" type="text" value="">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Address 3</label>
                                    <input class="form-control" id="Address3" name="Address3" type="text" value="">
                                </div>
                                <div class="col-md-6">
                                    <label>Address 4</label>
                                    <input class="form-control" id="Address4" name="Address4" type="text" value="">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>State</label>
                                    <input class="form-control" id="StateName" name="StateName" type="text" value="">
                                </div>
                                <div class="col-md-6">
                                    <label>City</label>
                                    <input class="form-control" id="CityName" name="CityName" type="text" value="">
                                </div>
                                <input id="AddressLinkID" name="AddressLinkID" type="hidden" value="">
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Zipcode</label>
                                    <input class="form-control" id="ZipCode" name="ZipCode" type="text" value="">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" onclick="btnSaveAddress();" class="btn btn-primary">Save changes</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="modal" id="attachmentModal">
            <div class="modal-dialog modal-md">
                <form id="frmAttachments" method="post">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Attachment</h4>
                        </div>
                        <div class="modal-body" id="attachment">
                            <div class="row">
                                <div class="col-md-6">
                                    <select id="ddlAttachment" class="form-control"></select>
                                </div>
                                <div class="col-md-6">
                                    <input type="file" id="fileAttachment" />
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button id="btnSave" class="btn btn-primary" type="button" onclick="saveAttachment()">Save</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal" id="bankDetailsModal">
            <div class="modal-dialog modal-md">
                <form id="frmBank" method="post">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Bank Details</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Bank Name</label>
                                    <input type="text" id="txtBankName" class="form-control" />
                                </div>
                                <div class="col-md-6">
                                    <label>Branch</label>
                                    <input type="text" id="txtBranch" class="form-control" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Account Number</label>
                                    <input type="text" id="txtAccNumber" class="form-control" />
                                </div>
                                <div class="col-md-6">
                                    <label>Account Type</label>
                                    <input type="text" id="txtAccType" class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button id="btnSave" type="button" class="btn btn-primary" onclick="btnSaveBank()">Save</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        @section secscripts{
            <script src="@Url.Content("~/Scripts/jquery.validate.js")"></script>
            <script src="@Url.Content("~/Scripts/moment.js")"></script>
            <script src="@Url.Content("~/Scripts/bootstrap-datetimepicker.js")"></script>
            <script src="@Url.Content("~/Scripts/Internal/OperatorAddress.js")"></script>
            <script src="@Url.Content("~/Scripts/Internal/OperatorDriver.js")"></script>
            <script src="@Url.Content("~/Scripts/Internal/OperatorVehicle.js")"></script>
            <script src="@Url.Content("~/Scripts/Internal/OperatorBankDetails.js")"></script>
            <script type="text/javascript">
                function AddAddress() {
                    $('#addressModal').modal('show');
                }
                function AddVehicle() {
                    $('#VehicleModal').modal('show');
                }
                function AddDriver() {
                    $('#DriverModal').modal('show');
                    $('#operatorDriverList_VehicleNo option').each(function () {
                        if ($(this).hasClass('new')) {
                            $(this).remove();
                        }
                    });
                    var vehicles = $('.vehicleNoCss');
                    var newVehicleArr = new Array();

                    if (vehicles.length > 0) {
                        $.each(vehicles, function (index, item) {
                            var vehicle = $('#vehicle_OperatorVehicleList_' + index + '__operatorVehicle_VehicleRegistrationNo').val();
                            newVehicleArr.push(vehicle);
                        });
                    }
                    $.each(newVehicleArr, function (key, value) {
                        $('#operatorDriverList_VehicleNo')
                             .append($('<option class="new">', { value: value })
                             .text(value));
                    });


                }
                function bankDetails() {
                    $('#bankDetailsModal').modal('show');
                }
                function AddAttachments() {
                    $('#attachmentModal').modal('show');
                    $.ajax({
                        url: '@Url.Content("~/Operator/GetAttachmentData")',
                        type: 'GET',
                        contentType: 'application/json',
                        dataType: 'json',
                        success: function (data) {
                            var html = '';
                            $.each(data.attachments, function (key, val) {
                                html += "<option value='" + val.LookupID + "'>" + val.LookupDescription + "</option>";
                            });

                            $('#ddlAttachment').html(html);
                        },
                        error: function (err) {
                        }
                    })
                }
                function driverChanged(el) {
                    var DriverId = el.value;
                    $.ajax({
                        url: '@Url.Content("~/Operator/GetDriverDetails?DriverId=")' + DriverId,
                        method: 'get',
                        contentType: 'application/json',
                        success: function (data) {
                            $.each(data, function (i, item) {
                                $('#operatorDriverList_DriverLicenseNo').val(item.Value);
                                $('#operatorDriverList_DriverMobileNo').val(item.Text);
                            });
                        },
                        error: function (err) {

                        }
                    });
                }
                function saveAttachment() {
                    debugger;
                    var formData = new FormData();
                    var totalFiles = document.getElementById("fileAttachment").files.length;
                    for (var i = 0; i < totalFiles; i++) {
                        var file = document.getElementById("fileAttachment").files[i];
                        var OPeratorId = $('#OPerator_OPeratorID').val();
                        var lookupCode = $('#ddlAttachment').val();

                        formData.append("imageUploadForm", file);
                        formData.append("OPeratorId", OPeratorId);
                        formData.append("lookupCode", lookupCode);
                    }


                    $.ajax({
                        url: '@Url.Content("~/Operator/AddAttachment")',
                        type: 'POST',
                        processData: false,
                        contentType: false,
                        dataType: 'json',
                        data: formData, //JSON.stringify({ attachment: obj }),
                        success: function (data) {
                        },
                        error: function (err) {
                        }
                    });
                }

                $(function () {
                    $('#frmOperatorAdd').validate({
                        rules: {
                            'OPerator.OPeratorID': {
                                required: true
                            },
                            'OPerator.OPeratorName': {
                                required: true
                            },
                            'OPerator.VehicleNo': {
                                required: true
                            },
                            'OPerator.FatherName': {
                                required: true
                            },
                            'OPerator.DateOfBirth': {
                                required: true
                            },
                            'OPerator.PlaceOfBirth': {
                                required: true
                            },
                            'OPerator.Gender': {
                                required: true
                            },
                            'OPerator.MaritialStatus': {
                                required: true
                            },
                            'OPerator.MobileNo': {
                                required: true
                            },
                            'OPerator.PhoneNo': {
                                required: true
                            },
                            'OPerator.PANNo': {
                                required: true
                            },
                            'OPerator.AadharCardNo': {
                                required: true
                            },
                            'OPerator.LicenseNo': {
                                required: true
                            }
                        }
                    });
                    $('.dtCss').datetimepicker({
                        format: 'DD/MM/YY'
                    });
                });

                function btnSave() {
                    if ($('#frmOperatorAdd').valid()) {
                        $('#frmOperatorAdd').submit();
                    }
                }
                function onChangeVehicleCategory(selectedCategory) {
                    debugger
                    var category = selectedCategory.value;
                    $.ajax({
                        url: '@Url.Content("~/Operator/GetCategoryModel?categoryValue=")' + category,
                        method: 'get',
                        contentType: 'application/json',
                        success: function (data) {
                            $('#operatorVehicle_Model').removeAttr("disabled");
                                $("#operatorVehicle_Model").html(""); // clear before appending new list 
                                $("<option value='-1'>Select item</option>").appendTo("#operatorVehicle_Model");
                                $.each(data, function (i, val) {
                                    $("#operatorVehicle_Model").append(
                                        $('<option></option>').val(val.Text).html(val.Value));
                                });
                        },
                        error: function (err) {

                        }
                    });
                }
                function ModelChanged(el) {
                    var tonnage = el.value;
                    $.ajax({
                        url: '@Url.Content("~/Operator/GetTonnage?tonnage=")' + tonnage,
                        method: 'get',
                        contentType: 'application/json',
                        success: function (data) {
                            $.each(data, function (i, item) {
                                $('#operatorVehicle_Tonnage').val(item.Text);
                            });
                        },
                        error: function (err) {

                        }
                    });
                }
                function VehicleNo(el) {
                    var vehicleNo = el.value;
                    $.ajax({
                        url: '@Url.Content("~/Operator/GetVehicleNo?VehicleNo=")' + vehicleNo,
                        method: 'get',
                        contentType: 'application/json',
                        success: function (data) {
                            if (data == false) {
                                alert('This VehicleNo is exist!')
                                $('#operatorVehicle_VehicleRegistrationNo').val('');
                            }
                        },
                        error: function (err) {

                        }
                    });

                }
            </script>
        }

